# Terraform Модуль: Unmanaged VM

## Описание
Этот Terraform-модуль предназначен для создания и управления неуправляемыми виртуальными машинами (VM) в облачной инфраструктуре. Он поддерживает назначение IP-адресов, управление шаблонами, настройку ресурсов оборудования и интеграцию с сетевой инфраструктурой.

## Возможности
- **Развертывание виртуальных машин**: Автоматическое создание нескольких ВМ в заданных группах.
- **Настройка ресурсов ВМ**: Управление CPU, RAM, дисковым хранилищем и политиками хранения.
- **Подключение к сети**: Привязка ВМ к подсетям и настройка внешних IP-адресов.
- **Гибкое управление шаблонами**: Поддержка разных образов и конфигураций ВМ.
- **Интеграция с DNS**: Автоматическое создание внутренних и внешних записей DNS.

## Структура каталога
```
├── data.tf          # Источники данных (информация о сайтах, VPC, подсетях и IP-адресах)
├── unmanaged_vm.tf  # Определение виртуальных машин
├── userf.tf         # Пользовательские конфигурации
├── variable.tf      # Определение переменных
├── outputs.tf       # Определение выходных значений
├── README.md        # Документация модуля
```

## Предварительные требования
- **Terraform** (`>=1.0.0`)
- **Настроенные учетные данные облачного провайдера**
- **Доступ к управлению виртуальными машинами**

## Использование
### 1. Инициализация Terraform
```sh
terraform init
```

### 2. Проверка конфигурации
```sh
terraform validate
```

### 3. Планирование развертывания
```sh
terraform plan
```

### 4. Применение изменений
```sh
terraform apply -auto-approve
```

### 5. Удаление ресурсов (при необходимости)
```sh
terraform destroy -auto-approve
```

## Переменные
| Имя                | Описание                                       | Значение по умолчанию |
|---------------------|----------------------------------------------|------------------|
| `vm`              | Список виртуальных машин                      | См. `variable.tf` |
| `space_name`      | Пространство ресурсов                        | `identity-dso-scope` |
| `default_site_id` | Идентификатор основного сайта                | `f9fc337a-a53e-46c0-bb69-8a1a1d66dbe2` |
| `vpc_name`        | Имя виртуальной частной сети (VPC)           | - |
| `subnet_name`     | Имена подсетей                               | - |
| `external_ip_names` | Список внешних IP-адресов                   | - |
| `state`           | Текущее состояние подсетей                    | - |

## Выходные переменные
| Имя            | Описание                                     |
|---------------|-------------------------------------------|
| `unmanaged_vm`| Список созданных виртуальных машин       |
| `vpc`         | Информация о виртуальной частной сети   |
| `space`       | Пространство ресурсов                    |
| `vm`          | Конфигурация виртуальных машин           |
